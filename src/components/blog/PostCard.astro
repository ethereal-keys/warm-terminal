---
import { formatDateShort } from '@/lib/utils';

interface Props {
  title: string;
  description?: string;
  publishedAt: Date;
  tags: string[];
  slug: string;
}

const { title, description, publishedAt, tags, slug } = Astro.props;
---

<a href={`/writing/${slug}`} class="post-card">
  <div class="card-border">
    <span class="corner corner--tl">┌</span>
    <span class="corner corner--tr">┐</span>
    <span class="corner corner--bl">└</span>
    <span class="corner corner--br">┘</span>
  </div>

  <div class="card-meta">
    <span class="date">{formatDateShort(publishedAt)}</span>
    <span class="separator">·</span>
    <span class="tags">{tags.join(', ')}</span>
  </div>

  <h2 class="card-title">{title}</h2>

  {description && (
    <p class="card-description">{description}</p>
  )}
</a>

<style>
  .post-card {
    position: relative;
    display: block;
    padding: var(--space-3);
    background: var(--bg-card);
    text-decoration: none;
    color: inherit;
    transition:
      background 0.3s var(--ease-out),
      transform 0.3s var(--ease-out),
      box-shadow 0.3s var(--ease-out);
    box-shadow: var(--shadow-sm);
  }

  .post-card:hover {
    background: var(--bg-card-hover);
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
  }

  .card-border {
    position: absolute;
    inset: 0;
    border: 1px solid var(--border-light);
    pointer-events: none;
    transition: border-color 0.3s ease;
  }

  .post-card:hover .card-border {
    border-color: var(--border-hover);
  }

  .corner {
    position: absolute;
    font-size: var(--text-sm);
    line-height: 1;
    color: var(--text-ghost);
    background: var(--bg-card);
    padding: 0 3px;
    transition: color 0.3s ease, background 0.3s ease;
  }

  .post-card:hover .corner {
    color: var(--border-hover);
    background: var(--bg-card-hover);
  }

  .corner--tl { top: -1px; left: -1px; }
  .corner--tr { top: -1px; right: -1px; }
  .corner--bl { bottom: -1px; left: -1px; }
  .corner--br { bottom: -1px; right: -1px; }

  .card-meta {
    display: flex;
    align-items: center;
    gap: var(--space-1);
    font-size: var(--text-xs);
    color: var(--text-muted);
    margin-bottom: var(--space-2);
  }

  .separator {
    color: var(--text-ghost);
  }

  .card-title {
    font-size: var(--text-base);
    font-weight: 600;
    margin: 0;
    color: var(--text-primary);
    text-transform: none;
    letter-spacing: normal;
  }

  .card-description {
    font-size: var(--text-sm);
    color: var(--text-secondary);
    margin: var(--space-1) 0 0 0;
    line-height: var(--leading-relaxed);
  }
</style>