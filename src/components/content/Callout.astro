---
interface Props {
  type?: 'note' | 'warning' | 'tip';
  class?: string;
}

const { type = 'note', class: className } = Astro.props;

const labels: Record<string, string> = {
  note: 'note',
  warning: 'warning',
  tip: 'tip',
};

const icons: Record<string, string> = {
  note: '·',
  warning: '!',
  tip: '▸',
};
---

<aside class:list={["callout", `callout--${type}`, className]}>
  <div class="callout-label">
    <span class="callout-icon">{icons[type]}</span>
    <span>{labels[type]}</span>
  </div>
  <div class="callout-content">
    <slot />
  </div>
</aside>

<style>
  .callout {
    position: relative;
    margin: var(--space-4) 0;
    padding: var(--space-2) var(--space-3);
    border-left: 2px solid var(--rust-muted);
    background: rgba(194, 85, 53, 0.04);
    border-radius: 0 2px 2px 0;
  }

  .callout--warning {
    border-left-color: #B8860B;
    background: rgba(184, 134, 11, 0.04);
  }

  .callout--tip {
    border-left-color: var(--status-green);
    background: rgba(139, 154, 107, 0.04);
  }

  .callout-label {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: var(--text-sm);
    font-weight: 600;
    color: var(--rust-muted);
    margin-bottom: var(--space-1);
    text-transform: lowercase;
    letter-spacing: 0.02em;
  }

  .callout--warning .callout-label {
    color: #B8860B;
  }

  .callout--tip .callout-label {
    color: var(--status-green);
  }

  .callout-icon {
    font-size: var(--text-base);
    line-height: 1;
  }

  .callout-content {
    font-size: var(--text-sm);
    line-height: var(--leading-relaxed);
    color: var(--text-secondary);
  }

  .callout-content :global(p) {
    margin: 0;
  }

  .callout-content :global(p + p) {
    margin-top: var(--space-1);
  }
</style>